/* ═══════════════════════════════════════
   MY MUQABALA — REUSABLE COMPONENTS
   Phase badge, countdown, match card,
   notification bell, theme toggle, etc.
═══════════════════════════════════════ */

/* ─── PHASE PROGRESSION INDICATOR ─── */
.phase-progress {
    display: flex; align-items: center; gap: 0; width: 100%;
    background: var(--card-bg, #fff); border-radius: var(--radius, 16px);
    border: 1px solid var(--card-border, rgba(107,90,156,0.08));
    padding: 1rem 1.25rem; margin-bottom: 1.5rem;
}
.phase-progress-step {
    flex: 1; display: flex; flex-direction: column; align-items: center;
    gap: 0.4rem; position: relative;
}
.phase-progress-step:not(:last-child)::after {
    content: ''; position: absolute; top: 16px; left: calc(50% + 20px);
    width: calc(100% - 40px); height: 2px;
    background: var(--card-border, rgba(107,90,156,0.08));
}
.phase-progress-step.completed:not(:last-child)::after {
    background: var(--sage, #7d9a8c);
}
.phase-progress-step.active:not(:last-child)::after {
    background: linear-gradient(90deg, var(--purple, #7c3aed), var(--card-border, rgba(107,90,156,0.08)));
}
.phase-progress-dot {
    width: 32px; height: 32px; border-radius: 50%; display: flex;
    align-items: center; justify-content: center; font-size: 0.75rem;
    font-weight: 700; z-index: 2; transition: all 0.3s var(--ease-luxe, ease);
}
.phase-progress-step.pending .phase-progress-dot {
    background: var(--card-bg, #fff); border: 2px solid var(--card-border, rgba(107,90,156,0.08));
    color: var(--ink-faint, #9a9a9a);
}
.phase-progress-step.active .phase-progress-dot {
    background: var(--purple, #7c3aed); color: #fff;
    box-shadow: 0 0 0 4px rgba(124,58,237,0.2);
}
.phase-progress-step.completed .phase-progress-dot {
    background: var(--sage, #7d9a8c); color: #fff;
}
.phase-progress-label {
    font-size: 0.7rem; font-weight: 600; text-transform: uppercase;
    letter-spacing: 0.05em; color: var(--ink-faint, #9a9a9a);
}
.phase-progress-step.active .phase-progress-label { color: var(--purple, #7c3aed); }
.phase-progress-step.completed .phase-progress-label { color: var(--sage-deep, #5c7a6c); }

/* ─── EVENT COUNTDOWN WIDGET ─── */
.countdown-widget {
    background: linear-gradient(135deg, var(--purple-light, #ede9f5), rgba(255,255,255,0.9));
    border-radius: var(--radius, 16px); padding: 1.25rem 1.5rem;
    border: 1px solid rgba(124,58,237,0.1);
    display: flex; align-items: center; gap: 1.25rem;
}
.countdown-icon {
    width: 48px; height: 48px; border-radius: 14px;
    background: rgba(124,58,237,0.12); display: flex;
    align-items: center; justify-content: center; font-size: 1.4rem; flex-shrink: 0;
}
.countdown-info { flex: 1; }
.countdown-label {
    font-size: 0.72rem; font-weight: 600; text-transform: uppercase;
    letter-spacing: 0.08em; color: var(--ink-muted, #6b6b6b); margin-bottom: 0.15rem;
}
.countdown-title {
    font-family: var(--font-display, serif); font-size: 1.1rem;
    font-weight: 500; color: var(--ink, #1a1a1a); margin-bottom: 0.25rem;
}
.countdown-timer {
    display: flex; gap: 0.75rem;
}
.countdown-unit { text-align: center; }
.countdown-value {
    font-family: var(--font-display, serif); font-size: 1.6rem;
    font-weight: 600; color: var(--purple, #7c3aed); line-height: 1;
}
.countdown-unit-label {
    font-size: 0.6rem; font-weight: 600; text-transform: uppercase;
    letter-spacing: 0.06em; color: var(--ink-faint, #9a9a9a);
}

[data-theme="dark"] .countdown-widget {
    background: linear-gradient(135deg, rgba(124,58,237,0.1), var(--mm-surface, #1a1a28));
    border-color: rgba(124,58,237,0.08);
}

/* ─── ACTIVE MATCH CARD ─── */
.match-card {
    background: var(--card-bg, #fff); border-radius: var(--radius, 16px);
    border: 1px solid var(--card-border, rgba(107,90,156,0.08));
    padding: 1.5rem; display: flex; align-items: center; gap: 1.25rem;
    transition: all 0.35s var(--ease-luxe, ease);
}
.match-card:hover {
    box-shadow: var(--shadow-md, 0 4px 16px rgba(107,90,156,0.1));
    transform: translateY(-2px);
}
.match-avatar {
    width: 56px; height: 56px; border-radius: 50%; flex-shrink: 0;
    background: linear-gradient(135deg, var(--rose, #e8b4b8), var(--purple-soft, #8b7cb3));
    display: flex; align-items: center; justify-content: center;
    font-size: 1.5rem; color: #fff; filter: blur(0);
    position: relative; overflow: hidden;
}
.match-avatar.blurred { filter: blur(4px); }
.match-avatar-initial {
    font-family: var(--font-display, serif); font-size: 1.5rem; font-weight: 600;
}
.match-info { flex: 1; }
.match-name {
    font-family: var(--font-display, serif); font-size: 1.15rem;
    font-weight: 500; color: var(--ink, #1a1a1a);
}
.match-score-bar {
    height: 6px; border-radius: 100px; background: var(--purple-light, #ede9f5);
    margin-top: 0.5rem; overflow: hidden;
}
.match-score-fill {
    height: 100%; border-radius: 100px;
    background: linear-gradient(90deg, var(--purple, #7c3aed), var(--rose, #e8b4b8));
    transition: width 0.8s var(--ease-luxe, ease);
}
.match-score-text {
    font-size: 0.75rem; font-weight: 600; color: var(--purple, #7c3aed); margin-top: 0.25rem;
}
.match-meta {
    font-size: 0.78rem; color: var(--ink-muted, #6b6b6b); margin-top: 0.15rem;
}

/* ─── COACH MESSAGE WIDGET ─── */
.coach-widget {
    background: var(--card-bg, #fff); border-radius: var(--radius, 16px);
    border: 1px solid var(--card-border, rgba(107,90,156,0.08));
    padding: 1.25rem 1.5rem; display: flex; align-items: flex-start; gap: 1rem;
}
.coach-avatar {
    width: 40px; height: 40px; border-radius: 50%; flex-shrink: 0;
    background: linear-gradient(135deg, var(--gold, #c9a962), var(--amber, #d4a574));
    display: flex; align-items: center; justify-content: center;
    font-size: 1.1rem; color: #fff;
}
.coach-content { flex: 1; }
.coach-label {
    font-size: 0.7rem; font-weight: 600; text-transform: uppercase;
    letter-spacing: 0.08em; color: var(--gold, #c9a962); margin-bottom: 0.25rem;
}
.coach-message {
    font-size: 0.88rem; color: var(--ink-soft, #3d3d3d);
    line-height: 1.6; font-style: italic;
}
.coach-date {
    font-size: 0.72rem; color: var(--ink-faint, #9a9a9a); margin-top: 0.35rem;
}

/* ─── PENDING ACTIONS TRACKER ─── */
.actions-tracker {
    background: var(--card-bg, #fff); border-radius: var(--radius, 16px);
    border: 1px solid var(--card-border, rgba(107,90,156,0.08)); padding: 1.25rem;
}
.actions-tracker-title {
    font-family: var(--font-display, serif); font-size: 1.05rem;
    font-weight: 500; color: var(--ink, #1a1a1a); margin-bottom: 0.75rem;
    display: flex; align-items: center; gap: 0.5rem;
}
.actions-tracker-count {
    font-size: 0.7rem; font-weight: 700; padding: 0.15rem 0.5rem;
    border-radius: 100px; background: rgba(124,58,237,0.1); color: var(--purple, #7c3aed);
}
.action-item {
    display: flex; align-items: center; gap: 0.75rem;
    padding: 0.6rem 0; border-bottom: 1px solid var(--card-border, rgba(107,90,156,0.08));
}
.action-item:last-child { border-bottom: none; }
.action-icon {
    width: 32px; height: 32px; border-radius: 8px; display: flex;
    align-items: center; justify-content: center; font-size: 0.9rem; flex-shrink: 0;
}
.action-icon.urgent { background: rgba(232,180,184,0.15); }
.action-icon.normal { background: rgba(124,58,237,0.08); }
.action-icon.info { background: rgba(125,154,140,0.12); }
.action-text {
    flex: 1; font-size: 0.85rem; color: var(--ink-soft, #3d3d3d);
}
.action-cta {
    font-size: 0.75rem; font-weight: 600; color: var(--purple, #7c3aed);
    text-decoration: none; white-space: nowrap;
}
.action-cta:hover { text-decoration: underline; }

/* ─── NOTIFICATION BELL + BADGE ─── */
.notif-bell {
    position: relative; width: 40px; height: 40px; border-radius: 10px;
    border: 1px solid var(--card-border, rgba(107,90,156,0.08));
    background: var(--card-bg, #fff); display: flex; align-items: center;
    justify-content: center; cursor: pointer; font-size: 1.1rem;
    transition: all 0.2s ease; text-decoration: none;
}
.notif-bell:hover {
    border-color: var(--purple, #7c3aed); box-shadow: var(--shadow-sm);
}
.notif-badge {
    position: absolute; top: -4px; right: -4px; min-width: 18px; height: 18px;
    border-radius: 100px; background: var(--rose-deep, #c88b90); color: #fff;
    font-size: 0.6rem; font-weight: 700; display: flex; align-items: center;
    justify-content: center; padding: 0 4px;
    border: 2px solid var(--card-bg, #fff);
}
.notif-badge:empty { display: none; }

[data-theme="dark"] .notif-bell {
    background: var(--mm-surface, #1a1a28);
    border-color: var(--mm-border, rgba(255,255,255,0.06));
}
[data-theme="dark"] .notif-badge {
    border-color: var(--mm-surface, #1a1a28);
}

/* ─── THEME TOGGLE ─── */
.theme-toggle {
    width: 40px; height: 40px; border-radius: 10px;
    border: 1px solid var(--card-border, rgba(107,90,156,0.08));
    background: var(--card-bg, #fff); display: flex; align-items: center;
    justify-content: center; cursor: pointer; font-size: 1.1rem;
    transition: all 0.3s ease; user-select: none;
}
.theme-toggle:hover {
    border-color: var(--purple, #7c3aed); box-shadow: var(--shadow-sm);
}
[data-theme="dark"] .theme-toggle {
    background: var(--mm-surface, #1a1a28);
    border-color: var(--mm-border, rgba(255,255,255,0.06));
}

/* ─── NOTIFICATION LIST ITEMS ─── */
.notif-item {
    display: flex; align-items: flex-start; gap: 0.75rem;
    padding: 1rem 1.25rem; border-bottom: 1px solid var(--card-border, rgba(107,90,156,0.08));
    transition: background 0.2s ease; cursor: pointer;
}
.notif-item:hover { background: var(--paper-warm, #faf6f1); }
.notif-item:last-child { border-bottom: none; }
.notif-item.unread { background: rgba(124,58,237,0.03); }
.notif-item.unread::before {
    content: ''; width: 8px; height: 8px; border-radius: 50%;
    background: var(--purple, #7c3aed); flex-shrink: 0; margin-top: 0.4rem;
}
.notif-item-icon {
    width: 36px; height: 36px; border-radius: 10px; display: flex;
    align-items: center; justify-content: center; font-size: 1rem; flex-shrink: 0;
}
.notif-item-icon.event { background: var(--purple-light, #ede9f5); }
.notif-item-icon.document { background: var(--sage-light, #e8f0eb); }
.notif-item-icon.form { background: var(--gold-light, #f5efd8); }
.notif-item-icon.coach { background: var(--rose-light, #fdf2f3); }
.notif-item-content { flex: 1; }
.notif-item-title {
    font-size: 0.88rem; font-weight: 600; color: var(--ink, #1a1a1a); margin-bottom: 0.15rem;
}
.notif-item-desc {
    font-size: 0.8rem; color: var(--ink-muted, #6b6b6b); line-height: 1.4;
}
.notif-item-time {
    font-size: 0.7rem; color: var(--ink-faint, #9a9a9a); margin-top: 0.25rem;
}

[data-theme="dark"] .notif-item:hover { background: var(--mm-bg-warm, #141420); }
[data-theme="dark"] .notif-item.unread { background: rgba(124,58,237,0.06); }

/* ─── DOCUMENT VIEWER NAV ─── */
.doc-viewer-nav {
    display: flex; align-items: center; justify-content: space-between;
    padding: 0.75rem 1.25rem; background: var(--card-bg, #fff);
    border-radius: var(--radius-sm, 10px); border: 1px solid var(--card-border);
    margin-bottom: 1rem;
}
.doc-viewer-btn {
    display: inline-flex; align-items: center; gap: 0.4rem;
    padding: 0.5rem 1rem; border-radius: 100px;
    border: 1px solid var(--card-border); background: var(--card-bg, #fff);
    font-family: var(--font-body, sans-serif); font-size: 0.82rem;
    font-weight: 500; color: var(--ink-soft, #3d3d3d);
    cursor: pointer; transition: all 0.2s ease;
}
.doc-viewer-btn:hover:not(:disabled) {
    border-color: var(--purple); color: var(--purple); background: var(--purple-light);
}
.doc-viewer-btn:disabled { opacity: 0.4; cursor: not-allowed; }
.doc-viewer-counter {
    font-size: 0.85rem; font-weight: 600; color: var(--ink, #1a1a1a);
}
.doc-viewer-progress {
    width: 100%; height: 4px; border-radius: 100px;
    background: var(--purple-light, #ede9f5); overflow: hidden; margin-bottom: 1rem;
}
.doc-viewer-progress-fill {
    height: 100%; border-radius: 100px;
    background: linear-gradient(90deg, var(--purple), var(--sage));
    transition: width 0.5s var(--ease-luxe, ease);
}

/* ─── BLINK DATE TIMER (circular) ─── */
.blink-timer {
    width: 200px; height: 200px; border-radius: 50%; position: relative;
    display: flex; align-items: center; justify-content: center;
    margin: 0 auto 1.5rem;
}
.blink-timer-ring {
    position: absolute; inset: 0;
}
.blink-timer-ring circle {
    fill: none; stroke-width: 4; stroke-linecap: round;
}
.blink-timer-ring .ring-bg {
    stroke: var(--card-border, rgba(107,90,156,0.08));
}
.blink-timer-ring .ring-fill {
    stroke: var(--purple, #7c3aed);
    transition: stroke-dashoffset 1s linear;
    transform: rotate(-90deg); transform-origin: center;
}
.blink-timer-text {
    font-family: var(--font-display, serif); font-size: 2.5rem;
    font-weight: 400; color: var(--ink, #1a1a1a); z-index: 2;
}
.blink-timer-label {
    font-size: 0.75rem; font-weight: 600; text-transform: uppercase;
    letter-spacing: 0.08em; color: var(--ink-muted, #6b6b6b);
    position: absolute; bottom: 40px; z-index: 2;
}

/* ─── CONVERSATION TOPIC CARDS ─── */
.topic-card {
    background: var(--card-bg, #fff); border-radius: var(--radius, 16px);
    border: 1px solid var(--card-border); padding: 1.25rem;
    text-align: center; transition: all 0.35s var(--ease-luxe, ease);
    opacity: 0.5; pointer-events: none;
}
.topic-card.active {
    opacity: 1; pointer-events: auto;
    border-color: var(--purple); box-shadow: 0 0 0 3px rgba(124,58,237,0.1);
}
.topic-card.completed {
    opacity: 0.6; border-color: var(--sage);
}
.topic-number {
    font-family: var(--font-display, serif); font-size: 1.4rem;
    font-weight: 600; color: var(--purple, #7c3aed); margin-bottom: 0.25rem;
}
.topic-text {
    font-size: 0.88rem; color: var(--ink-soft, #3d3d3d); line-height: 1.5;
}

/* ─── PHOTO SELECTION GRID ─── */
.photo-grid {
    display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
    gap: 1rem;
}
.photo-option {
    position: relative; border-radius: var(--radius, 16px); overflow: hidden;
    aspect-ratio: 3/4; cursor: pointer; transition: all 0.25s ease;
    border: 3px solid transparent;
}
.photo-option.selected {
    border-color: var(--purple, #7c3aed);
    box-shadow: 0 0 0 3px rgba(124,58,237,0.2);
}
.photo-option img {
    width: 100%; height: 100%; object-fit: cover;
    filter: blur(8px); transition: filter 0.3s ease;
}
.photo-option .photo-check {
    position: absolute; top: 8px; right: 8px; width: 24px; height: 24px;
    border-radius: 50%; background: rgba(255,255,255,0.9);
    display: flex; align-items: center; justify-content: center;
    opacity: 0; transition: opacity 0.2s ease;
}
.photo-option.selected .photo-check {
    opacity: 1; background: var(--purple); color: #fff;
}

/* ─── FEEDBACK FORM (emoji quick) ─── */
.feedback-emoji-row {
    display: flex; gap: 0.75rem; justify-content: center; margin: 1.25rem 0;
}
.feedback-emoji {
    width: 56px; height: 56px; border-radius: 50%;
    border: 2px solid var(--card-border); background: var(--card-bg, #fff);
    display: flex; align-items: center; justify-content: center;
    font-size: 1.8rem; cursor: pointer; transition: all 0.2s ease;
}
.feedback-emoji:hover { transform: scale(1.15); }
.feedback-emoji.selected {
    border-color: var(--purple); background: var(--purple-light);
    transform: scale(1.15); box-shadow: 0 0 0 3px rgba(124,58,237,0.15);
}

/* ─── ONBOARDING SLIDES ─── */
.onboarding-slide {
    display: none; flex-direction: column; align-items: center;
    text-align: center; padding: 2rem;
}
.onboarding-slide.active { display: flex; }
.onboarding-illustration {
    width: 180px; height: 180px; border-radius: 50%; margin-bottom: 2rem;
    background: linear-gradient(135deg, var(--purple-light), var(--rose-light));
    display: flex; align-items: center; justify-content: center; font-size: 4rem;
}
.onboarding-title {
    font-family: var(--font-display, serif); font-size: 1.8rem;
    font-weight: 500; color: var(--ink, #1a1a1a); margin-bottom: 0.75rem;
}
.onboarding-text {
    font-size: 0.95rem; color: var(--ink-muted, #6b6b6b); max-width: 400px;
    line-height: 1.7; margin-bottom: 2rem;
}
.onboarding-dots {
    display: flex; gap: 0.5rem; margin-bottom: 1.5rem;
}
.onboarding-dot {
    width: 8px; height: 8px; border-radius: 50%;
    background: var(--card-border); transition: all 0.3s ease;
}
.onboarding-dot.active {
    width: 24px; border-radius: 100px; background: var(--purple);
}

/* ─── PROFILE AVATAR UPLOAD ─── */
.profile-avatar-wrapper {
    width: 100px; height: 100px; border-radius: 50%; position: relative;
    margin: 0 auto 1.5rem; cursor: pointer;
}
.profile-avatar {
    width: 100%; height: 100%; border-radius: 50%; object-fit: cover;
    background: linear-gradient(135deg, var(--purple), var(--rose-deep));
    display: flex; align-items: center; justify-content: center;
    font-family: var(--font-display, serif); font-size: 2.5rem;
    font-weight: 600; color: #fff;
}
.profile-avatar-edit {
    position: absolute; bottom: 0; right: 0; width: 32px; height: 32px;
    border-radius: 50%; background: var(--purple); color: #fff;
    display: flex; align-items: center; justify-content: center;
    font-size: 0.8rem; border: 3px solid var(--card-bg, #fff);
    transition: transform 0.2s ease;
}
.profile-avatar-edit:hover { transform: scale(1.1); }

/* ─── ADMIN SCORING VIZ (5 bars) ─── */
.scoring-bar-group { margin-bottom: 0.75rem; }
.scoring-bar-label {
    display: flex; justify-content: space-between; margin-bottom: 0.25rem;
    font-size: 0.82rem;
}
.scoring-bar-name { font-weight: 600; color: var(--ink, #1a1a1a); }
.scoring-bar-value { font-weight: 700; color: var(--purple, #7c3aed); }
.scoring-bar {
    height: 10px; border-radius: 100px;
    background: var(--purple-light, #ede9f5); overflow: hidden;
}
.scoring-bar-fill {
    height: 100%; border-radius: 100px; transition: width 0.8s var(--ease-luxe, ease);
}
.scoring-bar-fill.cat-1 { background: linear-gradient(90deg, var(--purple), var(--purple-soft)); }
.scoring-bar-fill.cat-2 { background: linear-gradient(90deg, var(--rose), var(--rose-deep)); }
.scoring-bar-fill.cat-3 { background: linear-gradient(90deg, var(--sage), var(--sage-deep)); }
.scoring-bar-fill.cat-4 { background: linear-gradient(90deg, var(--gold), var(--amber)); }
.scoring-bar-fill.cat-5 { background: linear-gradient(90deg, #4a5568, var(--purple-deep)); }

/* ─── ADMIN EVENT CARD ─── */
.event-card {
    background: var(--card-bg, #fff); border-radius: var(--radius, 16px);
    border: 1px solid var(--card-border); padding: 1.25rem;
    display: flex; align-items: center; gap: 1rem;
    transition: all 0.25s ease;
}
.event-card:hover { box-shadow: var(--shadow-sm); }
.event-date-badge {
    width: 52px; text-align: center; flex-shrink: 0;
}
.event-date-day {
    font-family: var(--font-display, serif); font-size: 1.6rem;
    font-weight: 600; color: var(--purple, #7c3aed); line-height: 1;
}
.event-date-month {
    font-size: 0.65rem; font-weight: 600; text-transform: uppercase;
    letter-spacing: 0.06em; color: var(--ink-muted, #6b6b6b);
}
.event-info { flex: 1; }
.event-title {
    font-weight: 600; font-size: 0.92rem; color: var(--ink, #1a1a1a);
}
.event-type-badge {
    font-size: 0.65rem; font-weight: 600; padding: 0.1rem 0.5rem;
    border-radius: 100px; text-transform: uppercase; letter-spacing: 0.04em;
}
.event-type-badge.matching { background: var(--rose-light); color: var(--rose-deep); }
.event-type-badge.coaching { background: var(--gold-light); color: var(--amber); }
.event-type-badge.blink_date { background: var(--purple-light); color: var(--purple-deep); }
.event-participants {
    font-size: 0.78rem; color: var(--ink-muted, #6b6b6b); margin-top: 0.15rem;
}
.event-status-dot {
    width: 10px; height: 10px; border-radius: 50%; flex-shrink: 0;
}
.event-status-dot.planifie { background: var(--gold); }
.event-status-dot.en_cours { background: var(--purple); animation: statusPulse 2s ease-in-out infinite; }
.event-status-dot.termine { background: var(--sage); }
.event-status-dot.annule { background: var(--ink-faint); }
